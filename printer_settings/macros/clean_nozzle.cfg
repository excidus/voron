[gcode_macro CLEAN_NOZZLE]
gcode:
  {% set wipe_count = 5 %}
  SAVE_GCODE_STATE NAME=clean_nozzle_state
  G90
  G0 Z15 F300
  G1 E5.0 F900
  {% for wipe in range(wipe_count) %}
    {% for coordinate in [(312, 350),(275, 347)] %}
      G0 X{coordinate[0]} Y{coordinate[1] + 0.25 * wipe} Z3.5 F9000
    {% endfor %}
  {% endfor %}
  _CLIENT_LINEAR_MOVE X=-10 F=7800
  _CLIENT_LINEAR_MOVE Y=-10 F=7800
  G1 E-10.0 F900
  RESTORE_GCODE_STATE NAME=clean_nozzle_state